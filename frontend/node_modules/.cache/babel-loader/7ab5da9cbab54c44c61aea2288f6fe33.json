{"ast":null,"code":"var _jsxFileName = \"/Users/jokizi/Documents/GitHub/BrunettiJoris_7_27052021/frontend/src/components/DeleteMessage/DeleteMessage.js\",\n    _s = $RefreshSig$();\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport api from \"../../Config/Api\";\nimport { useState } from \"react\";\nimport ConfirmPopUp from \"../ConfirmPopUp/ConfirmPopUp\";\nimport { toastTrigger } from \"../../helper/toast\";\nimport \"./delete-message.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DeleteMessage = ({\n  messageId,\n  myUserId,\n  idUserMessage,\n  changeDeleteMessage,\n  admin\n}) => {\n  _s();\n\n  const [open, setOpen] = useState(false);\n\n  const handleModal = () => {\n    setOpen(!open);\n  };\n\n  const onDeleteMessage = async () => {\n    const token = JSON.parse(JSON.stringify(sessionStorage.getItem(\"groupomania-token\")));\n\n    try {\n      await api({\n        url: \"/messages/\" + messageId,\n        method: \"delete\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\",\n          \"Content-Type\": \"multipart/from-data\"\n        }\n      });\n      changeDeleteMessage(messageId);\n      toastTrigger(\"success\", \"Publication supprimé 👌🏼\");\n    } catch (error) {\n      toastTrigger(\"error\", \"Une erreur est survenue ⛔️\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [(myUserId === idUserMessage || admin === true) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"delete-icon\",\n      onClick: handleModal,\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        color: \"red\",\n        icon: [\"far\", \"trash-alt\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this), \" supprimer\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmPopUp, {\n      open: open,\n      confirmModalAction: onDeleteMessage,\n      handleModal: handleModal,\n      buttonTitle1: \"Oui\",\n      buttonTitle2: \"Non\",\n      modalTitle: \"Voulez vous supprimer la publication ?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DeleteMessage, \"xG1TONbKtDWtdOTrXaTAsNhPg/Q=\");\n\n_c = DeleteMessage;\nexport default DeleteMessage;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteMessage\");","map":{"version":3,"sources":["/Users/jokizi/Documents/GitHub/BrunettiJoris_7_27052021/frontend/src/components/DeleteMessage/DeleteMessage.js"],"names":["FontAwesomeIcon","api","useState","ConfirmPopUp","toastTrigger","DeleteMessage","messageId","myUserId","idUserMessage","changeDeleteMessage","admin","open","setOpen","handleModal","onDeleteMessage","token","JSON","parse","stringify","sessionStorage","getItem","url","method","headers","Authorization","Accept","error"],"mappings":";;;AAAA,SAASA,eAAT,QAAgC,gCAAhC;AACA,OAAOC,GAAP,MAAgB,kBAAhB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,SAASC,YAAT,QAA6B,oBAA7B;AACA,OAAO,sBAAP;;;AAEA,MAAMC,aAAa,GAAG,CAAC;AAAEC,EAAAA,SAAF;AAAaC,EAAAA,QAAb;AAAuBC,EAAAA,aAAvB;AAAsCC,EAAAA,mBAAtC;AAA2DC,EAAAA;AAA3D,CAAD,KAAwE;AAAA;;AAC5F,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,KAAD,CAAhC;;AAEA,QAAMW,WAAW,GAAG,MAAM;AACxBD,IAAAA,OAAO,CAAC,CAACD,IAAF,CAAP;AACD,GAFD;;AAIA,QAAMG,eAAe,GAAG,YAAY;AAClC,UAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeC,cAAc,CAACC,OAAf,CAAuB,mBAAvB,CAAf,CAAX,CAAd;;AAEA,QAAI;AACF,YAAMnB,GAAG,CAAC;AACRoB,QAAAA,GAAG,EAAE,eAAef,SADZ;AAERgB,QAAAA,MAAM,EAAE,QAFA;AAGRC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAAST,KAAM,EADxB;AAEPU,UAAAA,MAAM,EAAE,kBAFD;AAGP,0BAAgB;AAHT;AAHD,OAAD,CAAT;AASAhB,MAAAA,mBAAmB,CAACH,SAAD,CAAnB;AACAF,MAAAA,YAAY,CAAC,SAAD,EAAY,2BAAZ,CAAZ;AACD,KAZD,CAYE,OAAOsB,KAAP,EAAc;AACdtB,MAAAA,YAAY,CAAC,OAAD,EAAU,4BAAV,CAAZ;AACD;AACF,GAlBD;;AAmBA,sBACE;AAAA,eACG,CAACG,QAAQ,KAAKC,aAAb,IAA8BE,KAAK,KAAK,IAAzC,kBACC;AAAK,MAAA,SAAS,EAAC,aAAf;AAA6B,MAAA,OAAO,EAAEG,WAAtC;AAAA,8BACE,QAAC,eAAD;AAAiB,QAAA,KAAK,EAAC,KAAvB;AAA6B,QAAA,IAAI,EAAE,CAAC,KAAD,EAAQ,WAAR;AAAnC;AAAA;AAAA;AAAA;AAAA,cADF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eAME,QAAC,YAAD;AACE,MAAA,IAAI,EAAEF,IADR;AAEE,MAAA,kBAAkB,EAAEG,eAFtB;AAGE,MAAA,WAAW,EAAED,WAHf;AAIE,MAAA,YAAY,EAAC,KAJf;AAKE,MAAA,YAAY,EAAC,KALf;AAME,MAAA,UAAU,EAAC;AANb;AAAA;AAAA;AAAA;AAAA,YANF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAiBD,CA3CD;;GAAMR,a;;KAAAA,a;AA4CN,eAAeA,aAAf","sourcesContent":["import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport api from \"../../Config/Api\";\nimport { useState } from \"react\";\nimport ConfirmPopUp from \"../ConfirmPopUp/ConfirmPopUp\";\nimport { toastTrigger } from \"../../helper/toast\";\nimport \"./delete-message.css\";\n\nconst DeleteMessage = ({ messageId, myUserId, idUserMessage, changeDeleteMessage, admin }) => {\n  const [open, setOpen] = useState(false);\n\n  const handleModal = () => {\n    setOpen(!open);\n  };\n\n  const onDeleteMessage = async () => {\n    const token = JSON.parse(JSON.stringify(sessionStorage.getItem(\"groupomania-token\")));\n\n    try {\n      await api({\n        url: \"/messages/\" + messageId,\n        method: \"delete\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\",\n          \"Content-Type\": \"multipart/from-data\",\n        },\n      });\n      changeDeleteMessage(messageId);\n      toastTrigger(\"success\", \"Publication supprimé 👌🏼\");\n    } catch (error) {\n      toastTrigger(\"error\", \"Une erreur est survenue ⛔️\");\n    }\n  };\n  return (\n    <div>\n      {(myUserId === idUserMessage || admin === true) && (\n        <div className=\"delete-icon\" onClick={handleModal}>\n          <FontAwesomeIcon color=\"red\" icon={[\"far\", \"trash-alt\"]} /> supprimer\n        </div>\n      )}\n      <ConfirmPopUp\n        open={open}\n        confirmModalAction={onDeleteMessage}\n        handleModal={handleModal}\n        buttonTitle1=\"Oui\"\n        buttonTitle2=\"Non\"\n        modalTitle=\"Voulez vous supprimer la publication ?\"\n      />\n    </div>\n  );\n};\nexport default DeleteMessage;\n"]},"metadata":{},"sourceType":"module"}