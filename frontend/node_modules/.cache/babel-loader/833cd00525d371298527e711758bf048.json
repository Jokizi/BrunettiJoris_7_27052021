{"ast":null,"code":"var _jsxFileName = \"/Users/jokizi/Documents/GitHub/BrunettiJoris_7_27052021/frontend/src/components/LikeMessage/LikeMessage.js\",\n    _s = $RefreshSig$();\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport api from \"../../Config/Api\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { toastTrigger } from \"../../helper/toast\";\nimport \"./likemessage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LikeDislikeMessage = ({\n  messageId,\n  like,\n  dislike,\n  changeLike,\n  messageLikeByCurrentUser\n}) => {\n  _s();\n\n  const [pushLike, setPushLike] = useState([\"far\", \"thumbs-up\"]);\n  const [pushDislike, setPushDislike] = useState([\"far\", \"thumbs-down\"]);\n  useEffect(() => {\n    if (messageLikeByCurrentUser === null || messageLikeByCurrentUser === void 0 ? void 0 : messageLikeByCurrentUser.length) {\n      if (messageLikeByCurrentUser[0].userLike) {\n        setPushLike([\"fas\", \"thumbs-up\"]);\n      } else if (messageLikeByCurrentUser[0].userDislike) {\n        setPushDislike([\"fas\", \"thumbs-down\"]);\n      }\n    }\n  }, [messageLikeByCurrentUser]);\n\n  const onLike = async () => {\n    try {\n      const token = JSON.parse(JSON.stringify(sessionStorage.getItem(\"groupomania-token\")));\n      const response = await api({\n        url: \"/messages/\" + messageId + \"/vote/like\",\n        method: \"post\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      if (response.data === \"like ajouté\") {\n        like = like + 1;\n        setPushLike([\"fas\", \"thumbs-up\"]);\n        toastTrigger(\"success\", \"Like ajouté 👍🏼\");\n      } else if (response.data === \"like retiré\") {\n        like = like - 1;\n        setPushLike([\"far\", \"thumbs-up\"]);\n        toastTrigger(\"success\", \"Like supprimé 👍🏼\");\n      } else if (response.data === \"dislike retiré, like ajouté\") {\n        like = like + 1;\n        toastTrigger(\"success\", \"Like ajouté 👍🏼\");\n        setPushLike([\"fas\", \"thumbs-up\"]);\n        dislike = dislike - 1;\n        setPushDislike([\"far\", \"thumbs-down\"]);\n      }\n\n      changeLike({\n        messageId,\n        like,\n        dislike\n      });\n    } catch (error) {}\n  };\n\n  const onDislike = async () => {\n    try {\n      const token = JSON.parse(JSON.stringify(sessionStorage.getItem(\"groupomania-token\")));\n      const response = await api({\n        url: \"/messages/\" + messageId + \"/vote/dislike\",\n        method: \"post\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      if (response.data === \"dislike ajouté\") {\n        dislike = dislike + 1;\n        setPushDislike([\"fas\", \"thumbs-down\"]);\n        toastTrigger(\"success\", \"Dislike ajouté 👎🏼\");\n      } else if (response.data === \"dislike retiré\") {\n        dislike = dislike - 1;\n        setPushDislike([\"far\", \"thumbs-down\"]);\n        toastTrigger(\"success\", \"Dislike supprimé 👎🏼\");\n      } else if (response.data === \"like retiré, dislike ajouté\") {\n        dislike = dislike + 1;\n        setPushDislike([\"fas\", \"thumbs-down\"]);\n        toastTrigger(\"success\", \"Dislike ajouté 👎🏼\");\n        like = like - 1;\n        setPushLike([\"far\", \"thumbs-up\"]);\n      }\n\n      changeLike({\n        messageId,\n        like,\n        dislike\n      });\n    } catch (error) {}\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"like-dislike-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"like-blue\",\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        onClick: onLike,\n        color: \"blue\",\n        icon: pushLike\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), \" \", like]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"like-icon\",\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        onClick: onDislike,\n        color: \"red\",\n        icon: pushDislike\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), \" \", dislike]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LikeDislikeMessage, \"AXyTK628wWmWyvB81RGYr951T9w=\");\n\n_c = LikeDislikeMessage;\nexport default LikeDislikeMessage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LikeDislikeMessage\");","map":{"version":3,"sources":["/Users/jokizi/Documents/GitHub/BrunettiJoris_7_27052021/frontend/src/components/LikeMessage/LikeMessage.js"],"names":["FontAwesomeIcon","api","useState","useEffect","toastTrigger","LikeDislikeMessage","messageId","like","dislike","changeLike","messageLikeByCurrentUser","pushLike","setPushLike","pushDislike","setPushDislike","length","userLike","userDislike","onLike","token","JSON","parse","stringify","sessionStorage","getItem","response","url","method","headers","Authorization","data","error","onDislike"],"mappings":"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","sourcesContent":["import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport api from \"../../Config/Api\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { toastTrigger } from \"../../helper/toast\";\nimport \"./likemessage.css\";\n\nconst LikeDislikeMessage = ({ messageId, like, dislike, changeLike, messageLikeByCurrentUser }) => {\n  const [pushLike, setPushLike] = useState([\"far\", \"thumbs-up\"]);\n  const [pushDislike, setPushDislike] = useState([\"far\", \"thumbs-down\"]);\n\n  useEffect(() => {\n    if (messageLikeByCurrentUser?.length) {\n      if (messageLikeByCurrentUser[0].userLike) {\n        setPushLike([\"fas\", \"thumbs-up\"]);\n      } else if (messageLikeByCurrentUser[0].userDislike) {\n        setPushDislike([\"fas\", \"thumbs-down\"]);\n      }\n    }\n  }, [messageLikeByCurrentUser]);\n\n  const onLike = async () => {\n    try {\n      const token = JSON.parse(JSON.stringify(sessionStorage.getItem(\"groupomania-token\")));\n\n      const response = await api({\n        url: \"/messages/\" + messageId + \"/vote/like\",\n        method: \"post\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      if (response.data === \"like ajouté\") {\n        like = like + 1;\n        setPushLike([\"fas\", \"thumbs-up\"]);\n        toastTrigger(\"success\", \"Like ajouté 👍🏼\");\n      } else if (response.data === \"like retiré\") {\n        like = like - 1;\n        setPushLike([\"far\", \"thumbs-up\"]);\n        toastTrigger(\"success\", \"Like supprimé 👍🏼\");\n      } else if (response.data === \"dislike retiré, like ajouté\") {\n        like = like + 1;\n        toastTrigger(\"success\", \"Like ajouté 👍🏼\");\n        setPushLike([\"fas\", \"thumbs-up\"]);\n        dislike = dislike - 1;\n        setPushDislike([\"far\", \"thumbs-down\"]);\n      }\n      changeLike({ messageId, like, dislike });\n    } catch (error) {}\n  };\n\n  const onDislike = async () => {\n    try {\n      const token = JSON.parse(JSON.stringify(sessionStorage.getItem(\"groupomania-token\")));\n\n      const response = await api({\n        url: \"/messages/\" + messageId + \"/vote/dislike\",\n        method: \"post\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      if (response.data === \"dislike ajouté\") {\n        dislike = dislike + 1;\n        setPushDislike([\"fas\", \"thumbs-down\"]);\n        toastTrigger(\"success\", \"Dislike ajouté 👎🏼\");\n      } else if (response.data === \"dislike retiré\") {\n        dislike = dislike - 1;\n        setPushDislike([\"far\", \"thumbs-down\"]);\n        toastTrigger(\"success\", \"Dislike supprimé 👎🏼\");\n      } else if (response.data === \"like retiré, dislike ajouté\") {\n        dislike = dislike + 1;\n        setPushDislike([\"fas\", \"thumbs-down\"]);\n        toastTrigger(\"success\", \"Dislike ajouté 👎🏼\");\n        like = like - 1;\n        setPushLike([\"far\", \"thumbs-up\"]);\n      }\n      changeLike({ messageId, like, dislike });\n    } catch (error) {}\n  };\n\n  return (\n    <div className=\"like-dislike-container\">\n      <div className=\"like-blue\">\n        <FontAwesomeIcon onClick={onLike} color=\"blue\" icon={pushLike} /> {like}\n      </div>\n      <div className=\"like-icon\">\n        <FontAwesomeIcon onClick={onDislike} color=\"red\" icon={pushDislike} /> {dislike}\n      </div>\n    </div>\n  );\n};\nexport default LikeDislikeMessage;\n"]},"metadata":{},"sourceType":"module"}