{"ast":null,"code":"var _jsxFileName = \"/Users/jokizi/Documents/GitHub/BrunettiJoris_7_27052021/frontend/src/components/DeleteComment/DeleteComment.js\",\n    _s = $RefreshSig$();\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport api from \"../../Config/Api\";\nimport { useState } from \"react\";\nimport ConfirmPopUp from \"../ConfirmPopUp/ConfirmPopUp\";\nimport { toastTrigger } from \"../../helper/toast\";\nimport { useHistory } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DeleteComment = ({\n  messageId,\n  admin,\n  commentId,\n  myUserId,\n  idUserComment,\n  changeDeleteComment,\n  setAllMessages,\n  setMessagesOtherUser,\n  locationState\n}) => {\n  _s();\n\n  const [open, setOpen] = useState(false);\n  const history = useHistory();\n\n  const handleModal = () => {\n    setOpen(!open);\n  };\n\n  const onDeleteComment = async () => {\n    const token = JSON.parse(JSON.stringify(sessionStorage.getItem(\"groupomania-token\")));\n\n    try {\n      await api({\n        url: `/user/${messageId}/${commentId}`,\n        method: \"delete\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\",\n          \"Content-Type\": \"multipart/from-data\"\n        }\n      });\n      toastTrigger(\"success\", \"Commentaire supprim√© üëåüèº\");\n      changeDeleteComment(commentId);\n    } catch (error) {\n      toastTrigger(\"error\", \"Une erreur est survenue ‚õîÔ∏è\");\n    }\n\n    if (history.location.pathname === \"/accueil\") {\n      try {\n        const response = await api({\n          url: \"/messages/\",\n          method: \"get\",\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setAllMessages(response.data);\n      } catch (error) {}\n\n      return;\n    }\n\n    if (history.location.pathname === \"/profil\") {\n      try {\n        const response = await api({\n          url: \"/user/messages\",\n          method: \"get\",\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setAllMessages(response.data);\n      } catch (error) {}\n\n      return;\n    }\n\n    if (history.location.pathname === \"/utilisateur/profil\") {\n      try {\n        const response = await api({\n          url: locationState,\n          method: \"get\",\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setMessagesOtherUser(response.data);\n      } catch (error) {}\n\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [(myUserId === idUserComment || admin === true) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"delete-icon\",\n      onClick: handleModal,\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        color: \"red\",\n        icon: [\"far\", \"trash-alt\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), \" supprimer\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmPopUp, {\n      open: open,\n      confirmModalAction: onDeleteComment,\n      handleModal: handleModal,\n      buttonTitle1: \"Oui\",\n      buttonTitle2: \"Non\",\n      modalTitle: \"Voulez vous supprimer le commentaire ?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DeleteComment, \"Cr95byNtwwQCcAoAd4X3wpmyd+M=\", false, function () {\n  return [useHistory];\n});\n\n_c = DeleteComment;\nexport default DeleteComment;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteComment\");","map":{"version":3,"sources":["/Users/jokizi/Documents/GitHub/BrunettiJoris_7_27052021/frontend/src/components/DeleteComment/DeleteComment.js"],"names":["FontAwesomeIcon","api","useState","ConfirmPopUp","toastTrigger","useHistory","DeleteComment","messageId","admin","commentId","myUserId","idUserComment","changeDeleteComment","setAllMessages","setMessagesOtherUser","locationState","open","setOpen","history","handleModal","onDeleteComment","token","JSON","parse","stringify","sessionStorage","getItem","url","method","headers","Authorization","Accept","error","location","pathname","response","data"],"mappings":"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","sourcesContent":["import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport api from \"../../Config/Api\";\nimport { useState } from \"react\";\nimport ConfirmPopUp from \"../ConfirmPopUp/ConfirmPopUp\";\nimport { toastTrigger } from \"../../helper/toast\";\nimport { useHistory } from \"react-router\";\n\nconst DeleteComment = ({\n  messageId,\n  admin,\n  commentId,\n  myUserId,\n  idUserComment,\n  changeDeleteComment,\n  setAllMessages,\n  setMessagesOtherUser,\n  locationState,\n}) => {\n  const [open, setOpen] = useState(false);\n  const history = useHistory();\n  const handleModal = () => {\n    setOpen(!open);\n  };\n\n  const onDeleteComment = async () => {\n    const token = JSON.parse(JSON.stringify(sessionStorage.getItem(\"groupomania-token\")));\n    try {\n      await api({\n        url: `/user/${messageId}/${commentId}`,\n        method: \"delete\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\",\n          \"Content-Type\": \"multipart/from-data\",\n        },\n      });\n      toastTrigger(\"success\", \"Commentaire supprim√© üëåüèº\");\n      changeDeleteComment(commentId);\n    } catch (error) {\n      toastTrigger(\"error\", \"Une erreur est survenue ‚õîÔ∏è\");\n    }\n    if (history.location.pathname === \"/accueil\") {\n      try {\n        const response = await api({\n          url: \"/messages/\",\n          method: \"get\",\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setAllMessages(response.data);\n      } catch (error) {}\n      return;\n    }\n    if (history.location.pathname === \"/profil\") {\n      try {\n        const response = await api({\n          url: \"/user/messages\",\n          method: \"get\",\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setAllMessages(response.data);\n      } catch (error) {}\n      return;\n    }\n    if (history.location.pathname === \"/utilisateur/profil\") {\n      try {\n        const response = await api({\n          url: locationState,\n          method: \"get\",\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setMessagesOtherUser(response.data);\n      } catch (error) {}\n      return;\n    }\n  };\n\n  return (\n    <div>\n      {(myUserId === idUserComment || admin === true) && (\n        <div className=\"delete-icon\" onClick={handleModal}>\n          <FontAwesomeIcon color=\"red\" icon={[\"far\", \"trash-alt\"]} /> supprimer\n        </div>\n      )}\n      <ConfirmPopUp\n        open={open}\n        confirmModalAction={onDeleteComment}\n        handleModal={handleModal}\n        buttonTitle1=\"Oui\"\n        buttonTitle2=\"Non\"\n        modalTitle=\"Voulez vous supprimer le commentaire ?\"\n      />\n    </div>\n  );\n};\nexport default DeleteComment;\n"]},"metadata":{},"sourceType":"module"}